# 1. Install required tools
sudo apt-get update
sudo apt-get install build-essential git bc bison flex libssl-dev libncurses5-dev wget

# 2. Download and extract the cross toolchain
cd ~
wget https://releases.linaro.org/components/toolchain/binaries/7.5-2019.12/arm-linux-gnueabihf/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf.tar.xz
tar xf gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf.tar.xz
export CROSS_COMPILE=~/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-
export PATH=$PATH:~/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin

# 3. Download BusyBox
cd ~
wget https://busybox.net/downloads/busybox-1.36.1.tar.bz2
tar xvf busybox-1.36.1.tar.bz2
cd busybox-1.36.1

# 4. Configure for ARM cross-compilation
make ARCH=arm CROSS_COMPILE=${CROSS_COMPILE} distclean
make ARCH=arm CROSS_COMPILE=${CROSS_COMPILE} defconfig
# Optionally make ARCH=arm CROSS_COMPILE=${CROSS_COMPILE} menuconfig

# 5. Build
make ARCH=arm CROSS_COMPILE=${CROSS_COMPILE} -j$(nproc)

# 6. Install to rootfs directory
mkdir ~/busybox_rootfs
make ARCH=arm CROSS_COMPILE=${CROSS_COMPILE} CONFIG_PREFIX=~/busybox_rootfs install
